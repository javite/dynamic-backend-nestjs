(self.webpackChunkdynamic_ui_ion=self.webpackChunkdynamic_ui_ion||[]).push([[4111],{4562:(o,n,e)=>{"use strict";e.d(n,{B:()=>d});var t=e(8583),i=e(665),c=e(7823),l=e(542),r=e(8720);let d=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[[c.Pc,t.ez,l.z],t.ez,i.u5,c.Pc]}),o})()},3019:(o,n,e)=>{"use strict";e.d(n,{b:()=>J});var t=e(8720),i=e(2234),c=e(9265),l=e(7823),r=e(8583),d=e(665),a=e(2612);function s(o,n){1&o&&(t.TgZ(0,"h2"),t._uU(1,"No hay Orden de trabajo en proceso"),t.qZA())}function g(o,n){1&o&&(t.TgZ(0,"ion-col"),t._UZ(1,"h1",14),t.qZA())}function u(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-col",15),t.TgZ(1,"ion-button",16),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).searchProducts()}),t._UZ(2,"ion-icon",17),t._uU(3," Buscar "),t.qZA(),t.TgZ(4,"ion-button",18),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).newProduct()}),t._UZ(5,"ion-icon",19),t._uU(6," Nuevo "),t.qZA(),t.qZA()}}function p(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-item"),t.TgZ(1,"ion-label",23),t.TgZ(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"ion-button",24),t.NdJ("click",function(){const n=t.CHM(o).$implicit;return t.oxw(3).selectProduct(n.id)}),t._uU(9,"Seleccionar"),t.qZA(),t.qZA()}if(2&o){const o=n.$implicit;t.xp6(3),t.Oqu(o.name),t.xp6(2),t.hij("Presentaci\xf3n: ",o.presentation,""),t.xp6(2),t.lnq("Peso: ",o.weightTarget," g | M\xe1ximo: ",o.weightMax," g | M\xednimo: ",o.weightMin," g")}}function Z(o,n){if(1&o&&(t.TgZ(0,"ion-row"),t.TgZ(1,"ion-col",20),t.TgZ(2,"ion-list",21),t.YNc(3,p,10,5,"ion-item",22),t.qZA(),t.qZA(),t.qZA()),2&o){const o=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",o.products)}}function h(o,n){if(1&o&&t._UZ(0,"app-product-detail",25),2&o){const o=t.oxw(2);t.Q6J("product",o.po.products[0])("edit",!1)}}function f(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-col",3),t.TgZ(1,"ion-item"),t.TgZ(2,"ion-label",4),t._uU(3,"Aceptados:"),t.qZA(),t.TgZ(4,"ion-input",11),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw(2).po.batches[0].okTotal=n}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const o=t.oxw(2);t.xp6(4),t.Q6J("ngModel",o.po.batches[0].okTotal)("readonly",!o.edit)}}function T(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-col",3),t.TgZ(1,"ion-item"),t.TgZ(2,"ion-label",4),t._uU(3,"Rechazados:"),t.qZA(),t.TgZ(4,"ion-input",11),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw(2).po.batches[0].nokTotal=n}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const o=t.oxw(2);t.xp6(4),t.Q6J("ngModel",o.po.batches[0].nokTotal)("readonly",!o.edit)}}function A(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-button",31),t.NdJ("click",function(){return t.CHM(o),t.oxw(3).delete()}),t._uU(1,"Eliminar"),t.qZA()}}function q(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-button",32),t.NdJ("click",function(){return t.CHM(o),t.oxw(3).load()}),t._uU(1,"Cargar"),t.qZA()}}function b(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-row",26),t.YNc(1,A,2,0,"ion-button",27),t.YNc(2,q,2,0,"ion-button",28),t.TgZ(3,"ion-button",29),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).cancel()}),t._uU(4,"Cancelar"),t.qZA(),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).save()}),t._uU(6,"Guardar"),t.qZA(),t.qZA()}if(2&o){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0==o.po.state&&!o.new),t.xp6(1),t.Q6J("ngIf",!o.isOpen)}}function x(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-button",29),t.NdJ("click",function(){return t.CHM(o),t.oxw(3).close()}),t._uU(1,"Finalizar"),t.qZA()}}function m(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-button",30),t.NdJ("click",function(){return t.CHM(o),t.oxw(3).modify()}),t._uU(1,"Modificar"),t.qZA()}}function M(o,n){1&o&&(t.TgZ(0,"ion-button",36),t._uU(1,"Guardar reporte"),t.qZA())}function C(o,n){if(1&o&&(t.TgZ(0,"ion-row",26),t.YNc(1,x,2,0,"ion-button",33),t.YNc(2,m,2,0,"ion-button",34),t.YNc(3,M,2,0,"ion-button",35),t.qZA()),2&o){const o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",1==o.po.state),t.xp6(1),t.Q6J("ngIf",1==o.po.state),t.xp6(1),t.Q6J("ngIf",2==o.po.state)}}function w(o,n){if(1&o){const o=t.EpF();t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.TgZ(2,"ion-col",2),t.TgZ(3,"h1"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"ion-row"),t.TgZ(6,"ion-col",3),t.TgZ(7,"ion-item"),t.TgZ(8,"ion-label",4),t._uU(9,"Nombre:*"),t.qZA(),t.TgZ(10,"ion-input",5),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().po.name=n}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"ion-col",3),t.TgZ(12,"ion-item"),t.TgZ(13,"ion-label",4),t._uU(14,"C\xf3digo:"),t.qZA(),t.TgZ(15,"ion-input",6),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().po.code=n}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"ion-row"),t.TgZ(17,"ion-col",2),t.TgZ(18,"ion-item"),t.TgZ(19,"ion-label",4),t._uU(20,"Descripci\xf3n:"),t.qZA(),t.TgZ(21,"ion-textarea",5),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().po.description=n}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"ion-grid"),t.TgZ(23,"ion-row"),t.YNc(24,g,2,0,"ion-col",1),t.TgZ(25,"ion-col",3),t.TgZ(26,"h1"),t._uU(27,"Producto"),t.qZA(),t.qZA(),t.YNc(28,u,7,0,"ion-col",7),t.qZA(),t.YNc(29,Z,4,1,"ion-row",1),t.YNc(30,h,1,2,"app-product-detail",8),t.qZA(),t.TgZ(31,"ion-row"),t.TgZ(32,"ion-col",2),t.TgZ(33,"h1"),t._uU(34," Lote "),t.qZA(),t.qZA(),t.TgZ(35,"ion-col",3),t.TgZ(36,"ion-item"),t.TgZ(37,"ion-label",4),t._uU(38,"Nombre:*"),t.qZA(),t.TgZ(39,"ion-input",5),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().po.batches[0].name=n}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"ion-col",3),t.TgZ(41,"ion-item"),t.TgZ(42,"ion-label",4),t._uU(43,"Fecha de fabricaci\xf3n:"),t.qZA(),t.TgZ(44,"ion-input",9),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().po.batches[0].productionDate=n}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"ion-col",3),t.TgZ(46,"ion-item"),t.TgZ(47,"ion-label",4),t._uU(48,"Fecha de vencimiento:"),t.qZA(),t._UZ(49,"ion-input",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"ion-row"),t.TgZ(51,"ion-col",3),t.TgZ(52,"ion-item"),t.TgZ(53,"ion-label",4),t._uU(54,"Tama\xf1o del lote:"),t.qZA(),t.TgZ(55,"ion-input",11),t.NdJ("ngModelChange",function(n){return t.CHM(o),t.oxw().po.batches[0].expectedSize=n}),t.qZA(),t.qZA(),t.qZA(),t.YNc(56,f,5,2,"ion-col",12),t.YNc(57,T,5,2,"ion-col",12),t.qZA(),t.YNc(58,b,7,2,"ion-row",13),t.YNc(59,C,4,3,"ion-row",13),t.qZA()}if(2&o){const o=t.oxw();t.xp6(4),t.hij(" ",o.title," "),t.xp6(6),t.Q6J("ngModel",o.po.name)("readonly",!o.edit),t.xp6(5),t.Q6J("ngModel",o.po.code)("readonly",!o.edit),t.xp6(6),t.Q6J("ngModel",o.po.description)("readonly",!o.edit),t.xp6(3),t.Q6J("ngIf",o.enableSelectProduct),t.xp6(4),t.Q6J("ngIf",o.enableSelectProduct),t.xp6(1),t.Q6J("ngIf",!o.productSelected),t.xp6(1),t.Q6J("ngIf",o.productSelected),t.xp6(9),t.Q6J("ngModel",o.po.batches[0].name)("readonly",!o.edit),t.xp6(5),t.Q6J("ngModel",o.po.batches[0].productionDate)("readonly",!o.edit),t.xp6(5),t.Q6J("readonly",!o.edit),t.xp6(6),t.Q6J("ngModel",o.po.batches[0].expectedSize)("readonly",!o.edit),t.xp6(1),t.Q6J("ngIf",2==o.po.state),t.xp6(1),t.Q6J("ngIf",2==o.po.state),t.xp6(1),t.Q6J("ngIf",o.user.level>1&&o.edit),t.xp6(1),t.Q6J("ngIf",o.user.level>1&&!o.edit)}}let J=(()=>{class o{constructor(o,n,e){this.router=o,this.httpClient=n,this.navCtrl=e,this.title="Orden de trabajo",this.isOpen=!1,this.productSelected=!1,this.editProd=!1,this.enableSelectProduct=!1}ngOnInit(){console.log("New: ",this.new),console.log(this.po),this.new?(this.isOpen=!0,this.enableSelectProduct=!0):(this.productSelected=!0,this.enableSelectProduct=0===this.po.state,this.httpClient.getActivePO().subscribe(o=>{console.log(o),this.isOpen=o.length>0}))}modify(){this.router.navigate([`product-order-detail/${this.po.id}`])}newProduct(){this.router.navigate(["product-detail"])}cancel(){this.back()}delete(){this.httpClient.deletePO(this.po.id).subscribe(o=>{console.log(o),this.back()},o=>console.log(o))}load(){this.httpClient.updatePO(this.po).subscribe(o=>{this.httpClient.openPO(this.po.id).subscribe(o=>{console.log(o),this.home()},o=>console.log(o))},o=>console.log(o))}home(){this.router.navigate(["home"])}back(){this.navCtrl.back()}save(){if(this.new){console.log(this.po);let o=this.po;o.productId=this.productId,o.batch=this.po.batches[0],delete o.products,delete o.batches,delete o.createdAt,delete o.updatedAt,o.userId=this.user.id,console.log(o),this.httpClient.createPO(o).subscribe(o=>{console.log(o),this.back()},o=>console.log(o))}else this.httpClient.updatePO(this.po).subscribe(o=>{console.log(o),this.back()},o=>console.log(o))}close(){this.httpClient.closePO(this.po.id).subscribe(o=>{console.log(o),this.home()},o=>console.log(o))}searchProducts(){this.httpClient.getProducts().subscribe(o=>{console.log(o),this.products=o,this.productSelected=!1})}selectProduct(o){this.productSelected=!0,this.productId=o,this.po.products[0]=this.products.find(n=>n.id==o),console.log(o)}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(i.F0),t.Y36(c.O),t.Y36(l.SH))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-po-detail"]],inputs:{po:"po",edit:"edit",user:"user",new:"new"},decls:4,vars:2,consts:[[1,"card"],[4,"ngIf"],["size","12"],["size","12","size-sm",""],["position","stacked"],["type","text",3,"ngModel","readonly","ngModelChange"],["readonly","","type","text",3,"ngModel","readonly","ngModelChange"],["class","flex-align-items-end",4,"ngIf"],[3,"product","edit",4,"ngIf"],["type","date",3,"ngModel","readonly","ngModelChange"],["type","date","value","po.batches[0].expirationDate",3,"readonly"],["type","number",3,"ngModel","readonly","ngModelChange"],["size","12","size-sm","",4,"ngIf"],["class","ion-justify-content-end",4,"ngIf"],[1,"invisible"],[1,"flex-align-items-end"],["expand","","fill","solid","size","small","color","medium",3,"click"],["name","search-outline","slot","start"],["expand","","fill","solid","size","small","color","dark",3,"click"],["name","add-outline","slot","start"],[1,"ion-no-padding"],["lines","full",1,"list"],[4,"ngFor","ngForOf"],["slot","start"],["color","dark","slot","end",3,"click"],[3,"product","edit"],[1,"ion-justify-content-end"],["expand","block","fill","solid","color","danger","shape","round",3,"click",4,"ngIf"],["expand","block","fill","solid","color","primary","shape","round",3,"click",4,"ngIf"],["expand","block","fill","solid","color","medium","shape","round",3,"click"],["expand","block","fill","solid","color","dark","shape","round",3,"click"],["expand","block","fill","solid","color","danger","shape","round",3,"click"],["expand","block","fill","solid","color","primary","shape","round",3,"click"],["expand","block","fill","solid","color","medium","shape","round",3,"click",4,"ngIf"],["expand","block","fill","solid","color","dark","shape","round",3,"click",4,"ngIf"],["expand","block","fill","solid","color","dark","shape","round",4,"ngIf"],["expand","block","fill","solid","color","dark","shape","round"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-card",0),t.TgZ(1,"ion-card-content"),t.YNc(2,s,2,0,"h2",1),t.YNc(3,w,60,22,"ion-grid",1),t.qZA(),t.qZA()),2&o&&(t.xp6(2),t.Q6J("ngIf",!n.po),t.xp6(1),t.Q6J("ngIf",n.po))},directives:[l.PM,l.FN,r.O5,l.jY,l.Nd,l.wI,l.Ie,l.Q$,l.pK,l.j9,d.JJ,d.On,l.g2,l.as,l.YG,l.gu,l.q_,r.sg,a.c],styles:[".unit[_ngcontent-%COMP%]{text-align:end}.flex-align-items-end[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;align-items:center}.card[_ngcontent-%COMP%]{min-height:600px;--background:#0000;--border-color:#868686;border-radius:40px;margin-bottom:7%;background-color:hsla(240,0%,40%,.432)}.animation[_ngcontent-%COMP%]{animation:popIn .4s ease-in .1s both}@keyframes popIn{0%{opacity:0;transform:scale(.4)}to{opacity:1;transform:none}}ion-item[_ngcontent-%COMP%]{--background:#0000;--border-color:#868686}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{color:rgba(var(--ion-text-color-rgb,0,0,0),.4)}h1[_ngcontent-%COMP%]{text-align:center}.list[_ngcontent-%COMP%]{background-color:#fff0;margin:0 auto}"]}),o})()},542:(o,n,e)=>{"use strict";e.d(n,{z:()=>r});var t=e(8583),i=e(665),c=e(7823),l=e(8720);let r=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=l.oAB({type:o}),o.\u0275inj=l.cJS({imports:[[c.Pc,t.ez,i.u5],t.ez,i.u5,c.Pc]}),o})()},2612:(o,n,e)=>{"use strict";e.d(n,{c:()=>d});var t=e(8720),i=e(2234),c=e(9265),l=e(7823),r=e(665);let d=(()=>{class o{constructor(o,n,e){this.router=o,this.httpClient=n,this.navCtrl=e}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(i.F0),t.Y36(c.O),t.Y36(l.SH))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-detail"]],inputs:{product:"product",edit:"edit"},decls:49,vars:18,consts:[["size","12","size-sm",""],["position","stacked"],["type","text",3,"ngModel","readonly","ngModelChange"],["type","number",3,"ngModel","readonly","ngModelChange"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.TgZ(2,"ion-col",0),t.TgZ(3,"ion-item"),t.TgZ(4,"ion-label",1),t._uU(5,"Nombre:*"),t.qZA(),t.TgZ(6,"ion-input",2),t.NdJ("ngModelChange",function(o){return n.product.name=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"ion-col",0),t.TgZ(8,"ion-item"),t.TgZ(9,"ion-label",1),t._uU(10,"Presentacion:"),t.qZA(),t.TgZ(11,"ion-input",2),t.NdJ("ngModelChange",function(o){return n.product.presentation=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"ion-col",0),t.TgZ(13,"ion-item"),t.TgZ(14,"ion-label",1),t._uU(15,"C\xf3digo:"),t.qZA(),t.TgZ(16,"ion-input",2),t.NdJ("ngModelChange",function(o){return n.product.internalCode=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"ion-row"),t.TgZ(18,"ion-col",0),t.TgZ(19,"ion-item"),t.TgZ(20,"ion-label",1),t._uU(21,"Peso promedio:"),t.qZA(),t.TgZ(22,"ion-input",3),t.NdJ("ngModelChange",function(o){return n.product.weightTarget=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"ion-col",0),t.TgZ(24,"ion-item"),t.TgZ(25,"ion-label",1),t._uU(26,"Peso m\xe1ximo:"),t.qZA(),t.TgZ(27,"ion-input",3),t.NdJ("ngModelChange",function(o){return n.product.weightMax=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"ion-col",0),t.TgZ(29,"ion-item"),t.TgZ(30,"ion-label",1),t._uU(31,"Peso m\xednimo:"),t.qZA(),t.TgZ(32,"ion-input",3),t.NdJ("ngModelChange",function(o){return n.product.weightMin=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"ion-row"),t.TgZ(34,"ion-col",0),t.TgZ(35,"ion-item"),t.TgZ(36,"ion-label",1),t._uU(37,"Velocidad:"),t.qZA(),t.TgZ(38,"ion-input",3),t.NdJ("ngModelChange",function(o){return n.product.speed=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"ion-col",0),t.TgZ(40,"ion-item"),t.TgZ(41,"ion-label",1),t._uU(42,"GTIN:"),t.qZA(),t.TgZ(43,"ion-input",2),t.NdJ("ngModelChange",function(o){return n.product.GTIN=o}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"ion-col",0),t.TgZ(45,"ion-item"),t.TgZ(46,"ion-label",1),t._uU(47,"Ancho:"),t.qZA(),t.TgZ(48,"ion-input",3),t.NdJ("ngModelChange",function(o){return n.product.width=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(6),t.Q6J("ngModel",n.product.name)("readonly",!n.edit),t.xp6(5),t.Q6J("ngModel",n.product.presentation)("readonly",!n.edit),t.xp6(5),t.Q6J("ngModel",n.product.internalCode)("readonly",!n.edit),t.xp6(6),t.Q6J("ngModel",n.product.weightTarget)("readonly",!n.edit),t.xp6(5),t.Q6J("ngModel",n.product.weightMax)("readonly",!n.edit),t.xp6(5),t.Q6J("ngModel",n.product.weightMin)("readonly",!n.edit),t.xp6(6),t.Q6J("ngModel",n.product.speed)("readonly",!n.edit),t.xp6(5),t.Q6J("ngModel",n.product.GTIN)("readonly",!n.edit),t.xp6(5),t.Q6J("ngModel",n.product.width)("readonly",!n.edit))},directives:[l.jY,l.Nd,l.wI,l.Ie,l.Q$,l.pK,l.j9,r.JJ,r.On,l.as],styles:["ion-item[_ngcontent-%COMP%]{--background:#0000;--border-color:#868686}ion-input[_ngcontent-%COMP%]{color:rgba(var(--ion-text-color-rgb,0,0,0),.4)}"]}),o})()}}]);