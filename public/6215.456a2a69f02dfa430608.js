(self.webpackChunkdynamic_ui_ion=self.webpackChunkdynamic_ui_ion||[]).push([[6215],{8384:(e,t,r)=>{"use strict";r.d(t,{Uw:()=>l,fo:()=>s}),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var n=(()=>(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(n||(n={})),n))();class i extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const o=(e=>e.Capacitor=(e=>{var t,r,o,s,l;const a=e.CapacitorCustomPlatform||null,d=e.Capacitor||{},u=d.Plugins=d.Plugins||{},c=e.CapacitorPlatforms,h=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==a?a.name:(e=>{var t,r;return(null==e?void 0:e.androidBridge)?"android":(null===(r=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===r?void 0:r.bridge)?"ios":"web"})(e)),p=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.isNativePlatform)||(()=>"web"!==h()),g=(null===(o=null==c?void 0:c.currentPlatform)||void 0===o?void 0:o.isPluginAvailable)||(e=>{const t=f.get(e);return!!(null==t?void 0:t.platforms.has(h()))||!!v(e)}),v=(null===(s=null==c?void 0:c.currentPlatform)||void 0===s?void 0:s.getPluginHeader)||(e=>{var t;return null===(t=d.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),f=new Map,m=(null===(l=null==c?void 0:c.currentPlatform)||void 0===l?void 0:l.registerPlugin)||((e,t={})=>{const r=f.get(e);if(r)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),r.proxy;const o=h(),s=v(e);let l;const c=r=>{let u;const c=(...c)=>{const h=(async()=>(!l&&o in t?l=l="function"==typeof t[o]?await t[o]():t[o]:null!==a&&!l&&"web"in t&&(l=l="function"==typeof t.web?await t.web():t.web),l))().then(t=>{const l=((t,r)=>{var l,a;if(!s){if(t)return null===(a=t[r])||void 0===a?void 0:a.bind(t);throw new i(`"${e}" plugin is not implemented on ${o}`,n.Unimplemented)}{const n=null==s?void 0:s.methods.find(e=>r===e.name);if(n)return"promise"===n.rtype?t=>d.nativePromise(e,r.toString(),t):(t,n)=>d.nativeCallback(e,r.toString(),t,n);if(t)return null===(l=t[r])||void 0===l?void 0:l.bind(t)}})(t,r);if(l){const e=l(...c);return u=null==e?void 0:e.remove,e}throw new i(`"${e}.${r}()" is not implemented on ${o}`,n.Unimplemented)});return"addListener"===r&&(h.remove=async()=>u()),h};return c.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(c,"name",{value:r,writable:!1,configurable:!1}),c},p=c("addListener"),g=c("removeListener"),m=(e,t)=>{const r=p({eventName:e},t),n=async()=>{const n=await r;g({eventName:e,callbackId:n},t)},i=new Promise(e=>r.then(()=>e({remove:n})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()},i},w=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return s?m:p;case"removeListener":return g;default:return c(t)}}});return u[e]=w,f.set(e,{name:e,proxy:w,platforms:new Set([...Object.keys(t),...s?[o]:[]])}),w});return d.convertFileSrc||(d.convertFileSrc=e=>e),d.getPlatform=h,d.handleError=t=>e.console.error(t),d.isNativePlatform=p,d.isPluginAvailable=g,d.pluginMethodNoop=(e,t,r)=>Promise.reject(`${r} does not have an implementation of "${t}".`),d.registerPlugin=m,d.Exception=i,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),s=o.registerPlugin;class l{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const n=async()=>this.removeListener(e,t),i=Promise.resolve({remove:n});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach(e=>e(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new o.Exception(e,n.Unimplemented)}unavailable(e="not available"){return new o.Exception(e,n.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}},4091:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});let n=(()=>{class e{}return e.USER="user",e})()},3685:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});const n={production:!1,apiUrl_local:"http://localhost:3000/",apiURL_mobile:"http://192.168.1.63:3000/",ws_local:"ws://localhost:7300/",ws_mobile:"ws://192.168.1.63:7300/"}},9265:(e,t,r)=>{"use strict";r.d(t,{O:()=>u});var n=r(1841);const i=(()=>{function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e})();var o=r(205),s=r(5304),l=r(3685),a=r(8720),d=r(7823);let u=(()=>{class e{constructor(e,t){this.http=e,this.platform=t,this.platforms=this.platform.platforms();for(let r=0;r<this.platforms.length;r++)if("mobileweb"==this.platforms[r]||"pwa"==this.platforms[r]){this.plat="web";break}this.uri="web"===this.plat?l.N.apiUrl_local:l.N.apiURL_mobile}post(e,t){return this.http.post(this.uri+e,t).pipe((0,s.K)(this.handleError))}getActivePO(){new n.WM;const e=this.uri+"pos/open";return console.log(e),this.http.get(e).pipe((0,s.K)(this.handleError))}getPOs(){const e=this.uri+"pos";return console.log(e),this.http.get(e).pipe((0,s.K)(this.handleError))}getPOState(e){const t=this.uri+`pos/state/${e}`;return console.log(t),this.http.get(t).pipe((0,s.K)(this.handleError))}getPO(e){const t=this.uri+`pos/${e}`;return console.log(t),this.http.get(t).pipe((0,s.K)(this.handleError))}createPO(e){const t=this.uri+"pos";return console.log(t),this.http.post(t,e).pipe((0,s.K)(this.handleError))}updatePO(e){const t=this.uri+`pos/${e.id}`;return console.log(t),this.http.patch(t,e).pipe((0,s.K)(this.handleError))}closePO(e){let t={id:e};const r=this.uri+`pos/close/${e}`;return console.log(r),this.http.post(r,t).pipe((0,s.K)(this.handleError))}openPO(e){let t={id:e};const r=this.uri+`pos/open/${e}`;return console.log(r),this.http.post(r,t).pipe((0,s.K)(this.handleError))}deletePO(e){const t=this.uri+`pos/${e}`;return console.log(t),this.http.delete(t).pipe((0,s.K)(this.handleError))}getProducts(){const e=this.uri+"products";return console.log(e),this.http.get(e).pipe((0,s.K)(this.handleError))}getProduct(e){const t=this.uri+`products/${e}`;return console.log(t),this.http.get(t).pipe((0,s.K)(this.handleError))}createProduct(e){const t=this.uri+"products";return console.log(t),this.http.post(t,e).pipe((0,s.K)(this.handleError))}updateProduct(e){const t=this.uri+`products/${e.id}`;return console.log(t),this.http.patch(t,e).pipe((0,s.K)(this.handleError))}deleteProduct(e){const t=this.uri+`products/${e}`;return console.log(t),this.http.delete(t).pipe((0,s.K)(this.handleError))}getUsers(e){const t=this.uri+"users",r={headers:new n.WM({Authorization:`Bearer ${e}`})};return console.log(t),this.http.get(t,r).pipe((0,s.K)(this.handleError))}getUser(e,t){const r=this.uri+`users/${e}`,i={headers:new n.WM({Authorization:`Bearer ${t}`})};return console.log(r),this.http.get(r,i).pipe((0,s.K)(this.handleError))}createUser(e,t){const r=this.uri+"users",i={headers:new n.WM({Authorization:`Bearer ${t}`})};return console.log(r),this.http.post(r,e,i).pipe((0,s.K)(this.handleError))}updateUser(e,t){const r=this.uri+`users/${e.id}`,i={headers:new n.WM({Authorization:`Bearer ${t}`})};return console.log(r),this.http.patch(r,e,i).pipe((0,s.K)(this.handleError))}deleteUser(e,t){const r=this.uri+`users/${e}`,i={headers:new n.WM({Authorization:`Bearer ${t}`})};return console.log(r),this.http.delete(r,i).pipe((0,s.K)(this.handleError))}getUnitListAndStats(e,t){const r=this.uri+`units/list/stats/${e}/${t}`;return console.log(r),this.http.get(r).pipe((0,s.K)(this.handleError))}handleError(e){let t;if(e instanceof i)return(0,o._)("La l\xe1mpara no responde. Verifique su conexi\xf3n.");if(e.error instanceof ErrorEvent)console.error("Error cliente:",e.error.message),t=`Error:' ${e.error.message}`;else{switch(e.status){case 404:t="Archivo no encontrado.";break;case 401:t="Acceso no autorizado";break;case 403:t="Acceso denegado.";break;case 500:t="Error interno del servidor.";break;default:t="Error del servidor desconocido."}console.log(`Backend returned code ${e.status}, body was: ${e.error}`)}return(0,o._)(t)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(n.eN),a.LFG(d.t4))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8058:(e,t,r)=>{"use strict";r.d(t,{V:()=>l});var n=r(4762);const i=(0,r(8384).fo)("Storage",{web:()=>r.e(968).then(r.bind(r,968)).then(e=>new e.StorageWeb)});var o=r(7709),s=r(8720);let l=(()=>{class e{constructor(){this.userData=new o.xQ,this.userData$=this.userData.asObservable()}store(e,t){return(0,n.mG)(this,void 0,void 0,function*(){const r=btoa(escape(JSON.stringify(t)));yield i.set({key:e,value:r}),this.userData.next(t.user)})}get(e){return(0,n.mG)(this,void 0,void 0,function*(){const t=yield i.get({key:e});if(null===t.value)return this.userData.next(null),null;{let e=JSON.parse(unescape(atob(t.value)));return this.userData.next(e.user),e}})}removeStorageItem(e){return(0,n.mG)(this,void 0,void 0,function*(){yield i.remove({key:e}),yield this.userData.next(null)})}clear(){return(0,n.mG)(this,void 0,void 0,function*(){yield i.clear(),yield this.userData.next(null)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4762:(e,t,r)=>{"use strict";function n(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{a(n.next(e))}catch(t){o(t)}}function l(e){try{a(n.throw(e))}catch(t){o(t)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})}r.d(t,{mG:()=>n})}}]);