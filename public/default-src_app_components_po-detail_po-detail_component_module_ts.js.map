{"version":3,"sources":["./src/app/components/po-detail/po-detail.component.module.ts","./src/app/components/po-detail/po-detail.component.ts","./src/app/components/po-detail/po-detail.component.scss","./src/app/components/po-detail/po-detail.component.html"],"names":[],"mappings":"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","file":"default-src_app_components_po-detail_po-detail_component_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PoDetailComponent } from './po-detail.component';\r\nimport { ProductDetailModule } from './../product-detail/product-detail.component.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        IonicModule,\r\n        CommonModule,\r\n        ProductDetailModule\r\n    ],\r\n    declarations: [\r\n        PoDetailComponent\r\n    ],\r\n    exports: [\r\n        PoDetailComponent,\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule\r\n    ]\r\n    \r\n})\r\n\r\nexport class PoDetailModule{}","import { Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController, NavController } from '@ionic/angular';\r\n// import {trigger,state,style,animate,transition} from '@angular/animations';\r\nimport { AuthConstants } from 'src/app/configuration/auth-constants';\r\nimport { IPO } from 'src/app/models/IPO';\r\nimport { IProduct } from 'src/app/models/IProduct';\r\nimport { IUser } from 'src/app/models/IUser';\r\nimport { HttpService } from 'src/app/services/http.service';\r\nimport { StorageService } from 'src/app/services/storage.service';\r\nimport { FormValidationService } from 'src/app/services/form-validation.service';\r\n\r\n@Component({\r\n  selector: 'app-po-detail',\r\n  templateUrl: './po-detail.component.html',\r\n  styleUrls: ['./po-detail.component.scss'],\r\n})\r\nexport class PoDetailComponent implements OnInit {\r\n  @Input() po: IPO;\r\n  @Input() edit: boolean;\r\n  @Input() new: boolean;\r\n\r\n  title: string = \"Orden de trabajo\";\r\n  isOpen: boolean = false;\r\n  products: IProduct[];\r\n  productId: number;\r\n  productSelected: boolean =  false;\r\n  editProd: boolean = false;\r\n  enableSelectProduct: boolean = false;\r\n  user: IUser;\r\n  token: string;\r\n  productionDate: string;\r\n  expirationDate: string;\r\n  invalidInput: {\r\n    name: string,\r\n    batchName: string,\r\n    selectedProd: string\r\n  };\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private httpClient: HttpService,\r\n    private navCtrl: NavController,\r\n    private storageService: StorageService,\r\n    private formValidations: FormValidationService,\r\n    private alertController: AlertController\r\n    ) { }\r\n\r\n  ngOnInit() {\r\n    this.invalidInput = {\r\n      name: \"\",\r\n      batchName: \"\",\r\n      selectedProd: \"\"\r\n    }\r\n    this.storageService.get(AuthConstants.USER)\r\n      .then(res=>{\r\n        this.user = res.user;\r\n        this.token = res.accessToken;\r\n      })\r\n      .catch(err => console.log(\"No hay usuario logueado\"));\r\n    console.log(\"PO detail component init\")\r\n    this.productionDate = this.po.batches[0].productionDate;\r\n    this.expirationDate = this.po.batches[0].expirationDate;\r\n\r\n    if(this.new){\r\n      this.isOpen = true; // para que no aparezca el boton de guardar\r\n      this.enableSelectProduct =  true;\r\n    } else {\r\n      this.productSelected = true;\r\n      if(this.po != undefined && this.po.state === 0){\r\n        this.enableSelectProduct =  true;\r\n      } else {\r\n        this.enableSelectProduct =  false;\r\n      }\r\n    }\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    console.log(\"enter\")\r\n  }\r\n\r\n  modify(){\r\n    this.router.navigate([`product-order-detail/${this.po.id}`]);\r\n  }\r\n\r\n  newProduct(){\r\n    this.router.navigate(['product-detail']);\r\n  }\r\n\r\n  cancel(){\r\n    this.back();\r\n  }\r\n\r\n  async delete(){\r\n    const alert = await this.alertController.create({\r\n      header:'Atención!',\r\n      message: `¿Confirma que desea eliminar la orden ${this.po.name}?`,\r\n      buttons: [\r\n        {\r\n          text:'No',\r\n          role:'cancel',\r\n          handler: ()=>{}\r\n        },\r\n        {\r\n          text:'Si',\r\n          handler: () => {\r\n            this.httpClient.deletePO(this.po.id, this.token)\r\n              .subscribe(res => {\r\n                console.log(res);\r\n                this.back();\r\n              }, error => console.log(error)) \r\n            }\r\n          }\r\n        ]\r\n      }\r\n    )\r\n    await alert.present();\r\n  }\r\n\r\n  load(){\r\n    this.httpClient.updatePO(this.po, this.token)\r\n      .subscribe(res => {\r\n        this.httpClient.openPO(this.po.id, this.token).subscribe(res => {\r\n          console.log(res);\r\n          this.home();\r\n        }, error => console.log(error)) \r\n      }, error => console.log(error)) \r\n  }\r\n  \r\n  home(){\r\n    this.router.navigate([`home`]);\r\n  }\r\n\r\n  back(){\r\n    this.navCtrl.back();\r\n  }\r\n\r\n  async save(){\r\n    let validatedPo = {};\r\n    validatedPo = this.formValidations.validate(\r\n      this.po, \r\n      [{ param1: 'name', val: ['empty'] }]\r\n    );\r\n    let validatedBatch = {};\r\n    validatedBatch = this.formValidations.validate(\r\n      this.po.batches[0], \r\n      [{ param1: 'name', val: ['empty'] }]\r\n    );\r\n    let validatedProd = {};\r\n    validatedProd = this.formValidations.validate(\r\n      {[\"selectedProd\"]: this.productSelected}, \r\n      [{ param1: 'selectedProd', param2: 'Debe seleccionar un producto', val: ['truthy'] }]\r\n    );\r\n    this.invalidInput = {\r\n      ...this.invalidInput,\r\n      ...validatedPo,\r\n      ...validatedProd,\r\n      ['batchName']: validatedBatch['name']\r\n    }\r\n    console.log(this.invalidInput)\r\n    // CORROBORA POR ALGUN ELEMENTO CON STRING DE ERROR\r\n    let invalid = false\r\n    for ( let error in this.invalidInput ) {\r\n      if ( this.invalidInput[error] !== '' ) invalid = true;\r\n    }\r\n    if ( !invalid ) {\r\n      // NO HAY ERRORES\r\n      const alert = await this.alertController.create({\r\n        header:'Atención!',\r\n        message: `¿Confirma que desea ${ this.new ? 'crear' : 'modificar'} la orden ${this.po.name}?`,\r\n        buttons: [\r\n          {\r\n            text:'No',\r\n            role:'cancel',\r\n            handler: ()=>{}\r\n          },\r\n          {\r\n            text:'Si',\r\n            handler: () => {\r\n              if(this.new){\r\n                console.log(this.po)\r\n                let newPo = {...this.po};\r\n                newPo[\"productId\"] = this.productId;\r\n                newPo[\"batch\"] = this.po.batches[0];\r\n                delete newPo[\"products\"];\r\n                delete newPo[\"batches\"];\r\n                delete newPo[\"createdAt\"];\r\n                delete newPo[\"updatedAt\"];\r\n                newPo.userId = this.user.id;\r\n                console.log(newPo)\r\n                this.httpClient.createPO(newPo, this.token)\r\n                  .subscribe(res => {\r\n                    console.log(res);\r\n                    this.back();\r\n                  }, error => console.log(error))\r\n              }\r\n              else {\r\n                console.log(this.po);\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    );\r\n    await alert.present();\r\n  }\r\n}\r\n\r\n  close(){\r\n    this.httpClient.closePO(this.po.id, this.token)\r\n      .subscribe(res => {\r\n        console.log(res);\r\n        this.home();\r\n      }, error => console.log(error)) \r\n  }\r\n\r\n  searchProducts(){\r\n    this.httpClient.getProducts()\r\n      .subscribe(products => {\r\n        console.log(products);\r\n        this.products = products;\r\n        this.productSelected = false;\r\n      }, error => console.log(error));\r\n  }\r\n\r\n  selectProduct(productId){\r\n    this.productSelected = true;\r\n    this.invalidInput.selectedProd = '';\r\n    this.productId = productId;\r\n    this.po.products[0] = this.products.find(product => product.id === productId);\r\n    console.log(this.po.products[0])\r\n    console.log(productId)\r\n  }\r\n\r\n  dateChanged(event, num){\r\n    if(num === 0){\r\n      this.po.batches[0].productionDate = event.detail.value;\r\n    } else {\r\n      this.po.batches[0].expirationDate = event.detail.value;\r\n    }\r\n  }\r\n\r\n  clearInvalidInput(input: string) {\r\n    this.invalidInput[input] = ''\r\n  }\r\n\r\n}\r\n","export default \".unit {\\n  text-align: end;\\n}\\n\\n.flex-align-items-end {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: flex-end;\\n  align-items: center;\\n}\\n\\n.card {\\n  min-height: 600px;\\n  --background: transparent;\\n  --border-color: rgb(134, 134, 134);\\n  border-radius: 40px;\\n  margin-bottom: 7%;\\n  background-color: rgba(101, 101, 102, 0.432);\\n}\\n\\n.animation {\\n  animation: popIn 0.4s 0.1s both ease-in;\\n}\\n\\n@keyframes popIn {\\n  0% {\\n    opacity: 0;\\n    transform: scale(0.4);\\n  }\\n  100% {\\n    opacity: 1;\\n    transform: none;\\n  }\\n}\\n\\nion-item {\\n  --background: transparent;\\n  --border-color: rgb(134, 134, 134);\\n}\\n\\nion-input, ion-textarea {\\n  color: rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4);\\n}\\n\\nh1 {\\n  text-align: center;\\n}\\n\\n.list {\\n  background-color: rgba(255, 255, 255, 0);\\n  margin: 0 auto;\\n}\\n\\n.invalid-input {\\n  color: #f35151;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  padding: 3px;\\n  border-radius: 5px;\\n  font-size: smaller;\\n  margin-left: 5px auto;\\n  width: -webkit-fit-content;\\n  width: -moz-fit-content;\\n  width: fit-content;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvLWRldGFpbC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSjs7QUFFQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0VBQ0EsbUJBQUE7QUFDSjs7QUFHQTtFQUNJLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxrQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7RUFDQSw0Q0FBQTtBQUFKOztBQUdBO0VBRUksdUNBQUE7QUFESjs7QUFJQTtFQUNJO0lBQ0ksVUFBQTtJQUNBLHFCQUFBO0VBRE47RUFHRTtJQUNJLFVBQUE7SUFDQSxlQUFBO0VBRE47QUFDRjs7QUFJQTtFQUNJLHlCQUFBO0VBQ0Esa0NBQUE7QUFGSjs7QUFLQTtFQUNJLG9EQUFBO0FBRko7O0FBS0E7RUFDSSxrQkFBQTtBQUZKOztBQUtBO0VBQ0ksd0NBQUE7RUFDQSxjQUFBO0FBRko7O0FBS0E7RUFDSSxjQUFBO0VBQ0Esb0NBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMEJBQUE7RUFBQSx1QkFBQTtFQUFBLGtCQUFBO0VBQ0Esa0JBQUE7QUFGSiIsImZpbGUiOiJwby1kZXRhaWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudW5pdHtcclxuICAgIHRleHQtYWxpZ246IGVuZDtcclxufVxyXG5cclxuLmZsZXgtYWxpZ24taXRlbXMtZW5ke1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuXHJcbi5jYXJke1xyXG4gICAgbWluLWhlaWdodDogNjAwcHg7XHJcbiAgICAtLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgLS1ib3JkZXItY29sb3I6IHJnYigxMzQsIDEzNCwgMTM0KTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDQwcHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiA3JTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTAxLCAxMDEsIDEwMiwgMC40MzIpO1xyXG59XHJcblxyXG4uYW5pbWF0aW9ue1xyXG4gICAgLy8gdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1vdXQ7XHJcbiAgICBhbmltYXRpb246IHBvcEluIDAuNHMgMC4xcyBib3RoIGVhc2UtaW47XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgcG9wSW4ge1xyXG4gICAgMCUge1xyXG4gICAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjQpO1xyXG4gICAgfVxyXG4gICAgMTAwJSB7XHJcbiAgICAgICAgb3BhY2l0eTogMTtcclxuICAgICAgICB0cmFuc2Zvcm06IG5vbmU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlvbi1pdGVtIHtcclxuICAgIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgICAtLWJvcmRlci1jb2xvcjogcmdiKDEzNCwgMTM0LCAxMzQpO1xyXG59XHJcblxyXG5pb24taW5wdXQsIGlvbi10ZXh0YXJlYSB7XHJcbiAgICBjb2xvcjogcmdiYSh2YXIoLS1pb24tdGV4dC1jb2xvci1yZ2IsIDAsIDAsIDApLCAwLjQpO1xyXG59XHJcblxyXG5oMSB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5saXN0IHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMCk7XHJcbiAgICBtYXJnaW46IDAgYXV0bztcclxufVxyXG5cclxuLmludmFsaWQtaW5wdXQge1xyXG4gICAgY29sb3I6IHJnYigyNDMsIDgxLCA4MSk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBmb250LXNpemU6IHNtYWxsZXI7XHJcbiAgICBtYXJnaW4tbGVmdDogNXB4IGF1dG87XHJcbiAgICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn0iXX0= */\";","export default \"<ion-card class=\\\"card\\\">\\r\\n  <ion-card-content >\\r\\n    <h2 *ngIf=\\\"!po\\\">No hay Orden de trabajo en proceso</h2>\\r\\n    <ion-grid *ngIf=\\\"po\\\">\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <h1> {{title}} </h1>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\" size-sm>\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">Nombre:*</ion-label>\\r\\n            <ion-input type=\\\"text\\\" [(ngModel)]=\\\"po.name\\\" [readonly]=\\\"!edit\\\" (ngModelChange)=\\\"clearInvalidInput('name')\\\"></ion-input>\\r\\n          </ion-item>\\r\\n          <ion-item *ngIf=\\\"invalidInput.name !== ''\\\" class=\\\"warn-input\\\" lines=\\\"none\\\"> <span class=\\\"invalid-input\\\"> {{invalidInput.name}} </span> </ion-item>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\" size-sm>\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">Código:</ion-label>\\r\\n            <ion-input readonly type=\\\"text\\\" [(ngModel)]=\\\"po.code\\\" [readonly]=\\\"!edit\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">Descripción:</ion-label>\\r\\n            <ion-textarea  type=\\\"text\\\" [(ngModel)]=\\\"po.description\\\" [readonly]=\\\"!edit\\\"></ion-textarea>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n      <ion-grid>\\r\\n        <ion-row>\\r\\n          <ion-col *ngIf=\\\"enableSelectProduct\\\">\\r\\n            <h1 class=\\\"invisible\\\"></h1>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"12\\\" size-sm>\\r\\n            <h1>Producto</h1>\\r\\n          </ion-col>\\r\\n          <ion-col class=\\\"flex-align-items-end\\\"  *ngIf=\\\"enableSelectProduct\\\">\\r\\n            <ion-button expand=\\\"\\\" fill=\\\"solid\\\" size=\\\"small\\\" color=\\\"medium\\\"  (click)=\\\"searchProducts()\\\">\\r\\n              <ion-icon name=\\\"search-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n              Buscar\\r\\n            </ion-button>\\r\\n            <ion-button expand=\\\"\\\" fill=\\\"solid\\\" size=\\\"small\\\" color=\\\"dark\\\"  (click)=\\\"newProduct()\\\">\\r\\n              <ion-icon name=\\\"add-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n              Nuevo\\r\\n            </ion-button>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        <ion-row *ngIf=\\\"!productSelected\\\" >\\r\\n          <ion-col class=\\\"ion-no-padding\\\">\\r\\n            <ion-list class=\\\"list\\\" lines=\\\"full\\\">\\r\\n              <ion-item *ngFor=\\\"let product of products\\\"  >\\r\\n                <ion-label slot=\\\"start\\\">\\r\\n                  <h2>{{product.name}}</h2>\\r\\n                  <h3>Presentación: {{product.presentation}}</h3>\\r\\n                  <p>Peso: {{product.weightTarget}} g | Máximo: {{product.weightMax}} g | Mínimo: {{product.weightMin}} g</p>\\r\\n                </ion-label>\\r\\n                <ion-button color=\\\"dark\\\" slot=\\\"end\\\" (click)=\\\"selectProduct(product.id)\\\">Seleccionar</ion-button>\\r\\n              </ion-item>\\r\\n            </ion-list>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n        <app-product-detail *ngIf=\\\"productSelected\\\" [product]=\\\"po.products[0]\\\" [edit]=\\\"false\\\"></app-product-detail>\\r\\n        <ion-row *ngIf=\\\"invalidInput.selectedProd !== ''\\\">\\r\\n          <ion-col>\\r\\n            <ion-item class=\\\"warn-input\\\" lines=\\\"none\\\"> <span class=\\\"invalid-input\\\"> {{invalidInput.selectedProd}} </span> </ion-item>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <h1> Lote </h1>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\"  size-sm>\\r\\n          <ion-item >\\r\\n            <ion-label position=\\\"stacked\\\">Nombre:*</ion-label>\\r\\n            <ion-input  type=\\\"text\\\"  [(ngModel)]=\\\"po.batches[0].name\\\" [readonly]=\\\"!edit\\\" (ngModelChange)=\\\"clearInvalidInput('batchName')\\\"></ion-input>\\r\\n          </ion-item>\\r\\n          <ion-item *ngIf=\\\"invalidInput.batchName !== ''\\\" class=\\\"warn-input\\\" lines=\\\"none\\\"> <span class=\\\"invalid-input\\\"> {{invalidInput.batchName}} </span> </ion-item>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\"  size-sm>\\r\\n          <ion-item >\\r\\n            <ion-label position=\\\"stacked\\\">Fecha de fabricación:</ion-label>\\r\\n            <ion-input type=\\\"date\\\" [(ngModel)]=\\\"po.batches[0].productionDate\\\"  [readonly]=\\\"!edit\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\"  size-sm>\\r\\n          <ion-item >\\r\\n            <ion-label position=\\\"stacked\\\">Fecha de vencimiento:</ion-label>\\r\\n            <ion-input type=\\\"date\\\" [(ngModel)]=\\\"po.batches[0].expirationDate\\\"  [readonly]=\\\"!edit\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\"  size-sm>\\r\\n          <ion-item >\\r\\n            <ion-label position=\\\"stacked\\\">Tamaño del lote:</ion-label>\\r\\n            <ion-input  type=\\\"number\\\" [(ngModel)]=\\\"po.batches[0].expectedSize\\\" [readonly]=\\\"!edit\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\"  size-sm *ngIf=\\\"po.state == 2\\\">\\r\\n          <ion-item >\\r\\n            <ion-label position=\\\"stacked\\\" >Aceptados:</ion-label>\\r\\n            <ion-input  type=\\\"number\\\"[(ngModel)]=\\\"po.batches[0].okTotal\\\" [readonly]=\\\"!edit\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\"  size-sm *ngIf=\\\"po.state == 2\\\">\\r\\n          <ion-item >\\r\\n            <ion-label position=\\\"stacked\\\" >Rechazados:</ion-label>\\r\\n            <ion-input  type=\\\"number\\\" [(ngModel)]=\\\"po.batches[0].nokTotal\\\" [readonly]=\\\"!edit\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n\\r\\n      <ion-row class=\\\"ion-justify-content-end\\\" *ngIf=\\\"edit\\\">\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"danger\\\" shape=\\\"round\\\" (click)=\\\"delete()\\\" *ngIf=\\\"po.state == 0 && !new\\\">Eliminar</ion-button>\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"primary\\\" shape=\\\"round\\\" (click)=\\\"load()\\\" *ngIf=\\\"!isOpen\\\">Cargar</ion-button>\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"medium\\\" shape=\\\"round\\\" (click)=\\\"cancel()\\\">Cancelar</ion-button>\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"dark\\\" shape=\\\"round\\\" (click)=\\\"save()\\\">Guardar</ion-button>\\r\\n      </ion-row>\\r\\n      <ion-row class=\\\"ion-justify-content-end\\\" *ngIf=\\\"!edit\\\">\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"medium\\\" shape=\\\"round\\\" *ngIf=\\\"po.state == 1\\\" (click)=\\\"close()\\\">Finalizar</ion-button>\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"dark\\\" shape=\\\"round\\\" *ngIf=\\\"po.state == 1\\\" (click)=\\\"modify()\\\">Modificar</ion-button>\\r\\n        <ion-button expand=\\\"block\\\" fill=\\\"solid\\\" color=\\\"dark\\\" shape=\\\"round\\\" *ngIf=\\\"po.state == 2\\\" >Guardar reporte</ion-button>\\r\\n      </ion-row>\\r\\n\\r\\n    </ion-grid>\\r\\n  </ion-card-content>\\r\\n</ion-card>\";"],"sourceRoot":"webpack:///"}