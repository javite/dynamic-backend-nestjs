(self.webpackChunkdynamic_ui_ion=self.webpackChunkdynamic_ui_ion||[]).push([[7822],{7822:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserDetailPageModule:()=>x});var o=n(8583),i=n(665),s=n(7823),r=n(2234),a=n(4762),u=n(4091),c=n(8720),l=n(9265),d=n(8058);function g(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-button",15),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).saveUser()}),c._uU(1,"Guardar"),c.qZA()}}function h(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"ion-button",15),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).saveUser()}),c._uU(1,"Modificar"),c.qZA()}}function p(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"ion-button",16),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).deleteUser()}),c._uU(2,"Eliminar"),c.qZA(),c.qZA()}}function Z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",4),c.TgZ(1,"ion-avatar",5),c._UZ(2,"img",6),c.qZA(),c.TgZ(3,"div",7),c.TgZ(4,"div",8),c._uU(5,"Usuario: "),c.qZA(),c.TgZ(6,"ion-input",9),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().user.user=t}),c.qZA(),c.qZA(),c.TgZ(7,"div",7),c.TgZ(8,"ion-label"),c._uU(9,"Nombre: "),c.qZA(),c.TgZ(10,"ion-input",9),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().user.firstName=t}),c.qZA(),c.qZA(),c.TgZ(11,"div",7),c.TgZ(12,"ion-label"),c._uU(13,"Apellido: "),c.qZA(),c.TgZ(14,"ion-input",9),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().user.lastName=t}),c.qZA(),c.qZA(),c.TgZ(15,"div",7),c.TgZ(16,"ion-label"),c._uU(17,"Contrase\xf1a: "),c.qZA(),c.TgZ(18,"ion-input",10),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().user.password=t}),c.qZA(),c.qZA(),c.TgZ(19,"div",7),c.TgZ(20,"ion-label"),c._uU(21,"Nivel: "),c.qZA(),c.TgZ(22,"ion-input",9),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().user.level=t}),c.qZA(),c.qZA(),c.TgZ(23,"div",7),c.TgZ(24,"ion-label"),c._uU(25,"Activo: "),c.qZA(),c.TgZ(26,"ion-toggle",11),c.NdJ("ngModelChange",function(t){return c.CHM(e),c.oxw().user.active=t}),c.qZA(),c.qZA(),c.TgZ(27,"div",12),c.YNc(28,g,2,0,"ion-button",13),c.YNc(29,h,2,0,"ion-button",13),c.qZA(),c.YNc(30,p,3,0,"div",14),c.qZA()}if(2&e){const e=c.oxw();c.xp6(6),c.Q6J("ngModel",e.user.user),c.xp6(4),c.Q6J("ngModel",e.user.firstName),c.xp6(4),c.Q6J("ngModel",e.user.lastName),c.xp6(4),c.Q6J("ngModel",e.user.password),c.xp6(4),c.Q6J("ngModel",e.user.level),c.xp6(4),c.Q6J("ngModel",e.user.active),c.xp6(2),c.Q6J("ngIf",e.newUser),c.xp6(1),c.Q6J("ngIf",!e.newUser),c.xp6(1),c.Q6J("ngIf",!e.newUser)}}const f=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,s){this.router=e,this.activatedRoute=t,this.toastController=n,this.httpClient=o,this.storageService=i,this.alertController=s,this.data_loaded=!1}ngOnInit(){this.userId=this.activatedRoute.snapshot.paramMap.get("id"),"new"===this.userId?(this.newUser=!0,this.user={firstName:"",lastName:"",user:"",password:"",level:1,groupLevel:0,passExpirationDate:new Date,active:!0,erased:!1}):this.newUser=!1,this.storageService.get(u.l.USER).then(e=>{console.log(e),this.loggedUser=e.user,this.token=e.accessToken})}ionViewWillEnter(){"new"!==this.userId&&this.httpClient.getUser(this.userId,this.token).subscribe(e=>{console.log(e),this.user=e,this.data_loaded=!0},e=>console.log(e))}saveUser(){!0===this.newUser?(console.log("save user function: ",this.user),this.httpClient.createUser(this.user,this.token).subscribe(e=>{this.goBackToList()},e=>{console.log(e),this.showAlert(e)})):this.httpClient.updateUser(this.user,this.token).subscribe(e=>{console.log("save user function, modify: ",e),this.goBackToList()},e=>console.log(e))}deleteUser(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:"Atenci\xf3n!",message:`\xbfConfirma que desea borrar al usuario ${this.user.firstName} ${this.user.lastName}?`,buttons:[{text:"No",role:"cancel",handler:()=>{}},{text:"Si",handler:()=>{this.httpClient.deleteUser(+this.userId,this.token).subscribe(e=>{this.goBackToList()},e=>console.log(e))}}]});yield e.present()})}showAlert(e){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Atenci\xf3n!",message:`${e}`,buttons:[{text:"OK",handler:()=>{}}]});yield t.present()})}getBackButtonText(){return window,"Atr\xe1s"}goBackToList(){this.router.navigate(["/users"])}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(r.F0),c.Y36(r.gz),c.Y36(s.yF),c.Y36(l.O),c.Y36(d.V),c.Y36(s.Br))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-detail"]],decls:9,vars:2,consts:[["slot","start"],[3,"text"],[1,"background-po"],["class","user-container",4,"ngIf"],[1,"user-container"],[1,"avatar"],["src","assets/avatar.svg"],[1,"data"],[1,"user"],["type","text",1,"right","ion-padding",3,"ngModel","ngModelChange"],["type","password",1,"right","ion-padding",3,"ngModel","ngModelChange"],[1,"ion-padding",3,"ngModel","ngModelChange"],[1,"button-submit"],["color","dark",3,"click",4,"ngIf"],["class","button-submit",4,"ngIf"],["color","dark",3,"click"],["color","medium",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button",1),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"Usuario"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c.TgZ(7,"div",2),c.YNc(8,Z,31,9,"div",3),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("text",t.getBackButtonText()),c.xp6(5),c.Q6J("ngIf",t.user))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,o.O5,s.BJ,s.pK,s.j9,i.JJ,i.On,s.Q$,s.ho,s.w,s.YG],styles:[".background-po[_ngcontent-%COMP%]{background:#0b3681;background:radial-gradient(circle,#0b3681a6 0,#071220 35%,#041024d9 100%);height:100%;display:flex;flex-direction:row;justify-content:center;align-items:center}.user-container[_ngcontent-%COMP%]{margin:0 auto;background-color:hsla(240,0%,40%,.432);flex-direction:column;width:95%;max-width:410px;padding:35px;border-radius:40px}.data[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.data[_ngcontent-%COMP%]{flex-direction:row;width:100%;font-size:18px;border-bottom:1px solid #80808087}.button-submit[_ngcontent-%COMP%]{margin-top:20px}.avatar[_ngcontent-%COMP%]{height:auto;width:121px;margin-bottom:15px}.right[_ngcontent-%COMP%]{text-align:end}ion-item[_ngcontent-%COMP%]{--backgrouond:#0000}"]}),e})()}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.ez,i.u5,s.Pc,b]]}),e})()}}]);